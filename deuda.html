<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bit codeu prestamos</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <img src="c.jpeg" width="80px" class="img">
        <h1>BIT CODEU DEUDAS</h1>
        
        <div class="form-container">
            <h2>Agregar Nueva Deuda</h2>
            <form id="debt-form">
                <div class="form-group">
                    <label for="debtor-name">Nombre del Deudor:</label>
                    <input type="text" id="debtor-name" required>
                </div>
                
                <div class="form-group">
                    <label for="debt-amount">Monto:</label>
                    <input type="number" id="debt-amount" min="0" step="0.01" required>
                </div>
                
                <div class="form-group">
                    <label for="debt-description">Descripción:</label>
                    <input type="text" id="debt-description">
                </div>
                
                <div class="form-group">
                    <label for="debt-date">Fecha:</label>
                    <input type="date" id="debt-date" required>
                </div>
                
                <div class="form-group">
                    <label for="debt-due-date">Fecha de Vencimiento:</label>
                    <input type="date" id="debt-due-date">
                </div>
                
                <button type="submit">Agregar Deuda</button>
                <button id="logoutbtn" class="btn">Prestamos</button>
                <button id="logoutBtn" class="btn">Contabilidad</button>
                <button id="logoutbTn" class="btn">Cerrar sistema</button>
            </form>
        </div>
        
        <div class="debt-list">
            <h2>Lista de Deudas</h2>
            <div class="filters">
                <input type="text" id="search-debtor" placeholder="Buscar por nombre...">
                <select id="filter-status">
                    <option value="all">Todas</option>
                    <option value="pending">Pendientes</option>
                    <option value="paid">Pagadas</option>
                    <option value="overdue">Vencidas</option>
                </select>
            </div>
            
            <table id="debts-table">
                <thead>
                    <tr>
                        <th>Deudor</th>
                        <th>Monto</th>
                        <th>Descripción</th>
                        <th>Fecha</th>
                        <th>Vencimiento</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="debts-tbody">
                    <!-- Las deudas se agregarán aquí dinámicamente -->
                </tbody>
            </table>
            
            <div class="summary">
                <h3>Resumen</h3>
                <p>Total pendiente: <span id="total-pending">$0.00</span></p>
                <p>Total vencido: <span id="total-overdue">$0.00</span></p>
                <p>Total pagado: <span id="total-paid">$0.00</span></p>
            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
    <style>
      body {
    font-family: 'Arial', sans-serif;
    line-height: 1.6;
    margin: 0;
    padding: 20px;
    background-color: #f5f5f5;
    color: #333;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

h1{
    color: #3498db;
    text-align: center;
}
.img{
    
    float: right;
}
h2{
     color: #3498db;
text-align:center ; 
}
h3 {
    color: #3498db;

}


.form-container {
    background: #f9f9f9;
    padding: 20px;
    border-radius: 5px;
    margin-bottom: 20px;
}

.form-group {
    margin-bottom: 15px;
}

label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
}

input[type="text"],
input[type="number"],
input[type="date"],
select {
    width: 100%;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
    box-sizing: border-box;
}

button {
    background: #3498db;
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
}

button:hover {
    background: #27ae60;
}

.btn{
  float: center;  
}
.btn:hover{
    background: #27ae60;
}
.debt-list {
    margin-top: 20px;
}

.filters {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
}

.filters input, .filters select {
    flex: 1;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
}

th, td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #ddd;
}

th {
    background-color: #3498db;
    color: white;
}

tr:hover {
    background-color: #f5f5f5;
}

.status-pending {
    color: #e67e22;
    font-weight: bold;
}

.status-paid {
    color: #27ae60;
    font-weight: bold;
}

.status-overdue {
    color: #e74c3c;
    font-weight: bold;
}

.summary {
    background: #f9f9f9;
    padding: 15px;
    border-radius: 5px;
}

.summary p {
    margin: 5px 0;
    font-size: 16px;
}

.action-btn {
    padding: 5px 10px;
    margin: 0 2px;
    border: none;
    border-radius: 3px;
    cursor: pointer;
}

.pay-btn {
    background: #27ae60;
    color: white;
}

.delete-btn {
    background: #e74c3c;
    color: white;
}

@media (max-width: 768px) {
    .filters {
        flex-direction: column;
    }
}  
    </style>
    <script>

document.getElementById('logoutbtn').addEventListener('click', function() {
            localStorage.removeItem('currentUser');
            window.location.href = 'prestamos.html';
        });


document.getElementById('logoutBtn').addEventListener('click', function() {
            localStorage.removeItem('currentUser');
            window.location.href = 'indexx.html';
        });

        document.getElementById('logoutbTn').addEventListener('click', function() {
            localStorage.removeItem('currentUser');
            window.location.href = 'cerrar.html';
        });

      document.addEventListener('DOMContentLoaded', function() {
    const debtForm = document.getElementById('debt-form');
    const debtsTable = document.getElementById('debts-tbody');
    const searchInput = document.getElementById('search-debtor');
    const filterStatus = document.getElementById('filter-status');
    
    // Array para almacenar las deudas
    let debts = JSON.parse(localStorage.getItem('debts')) || [];
    
    // Función para guardar las deudas en localStorage
    function saveDebts() {
        localStorage.setItem('debts', JSON.stringify(debts));
        updateSummary();
    }
    
    // Función para agregar una nueva deuda
    function addDebt(event) {
        event.preventDefault();
        
        const debtorName = document.getElementById('debtor-name').value;
        const debtAmount = parseFloat(document.getElementById('debt-amount').value);
        const debtDescription = document.getElementById('debt-description').value;
        const debtDate = document.getElementById('debt-date').value;
        const debtDueDate = document.getElementById('debt-due-date').value;
        
        const newDebt = {
            id: Date.now(),
            debtorName,
            debtAmount,
            debtDescription,
            debtDate,
            debtDueDate,
            status: 'pending',
            paidDate: null
        };
        
        debts.push(newDebt);
        saveDebts();
        renderDebts();
        debtForm.reset();
    }
    
    // Función para renderizar las deudas en la tabla
    function renderDebts(filteredDebts = null) {
        const debtsToRender = filteredDebts || debts;
        debtsTable.innerHTML = '';
        
        if (debtsToRender.length === 0) {
            debtsTable.innerHTML = '<tr><td colspan="7">No hay deudas registradas</td></tr>';
            return;
        }
        
        debtsToRender.forEach(debt => {
            const row = document.createElement('tr');
            
            // Determinar el estado
            let statusClass = 'status-pending';
            let statusText = 'Pendiente';
            
            if (debt.status === 'paid') {
                statusClass = 'status-paid';
                statusText = 'Pagada';
            } else if (debt.status === 'overdue') {
                statusClass = 'status-overdue';
                statusText = 'Vencida';
            } else if (debt.debtDueDate && new Date(debt.debtDueDate) < new Date()) {
                debt.status = 'overdue';
                statusClass = 'status-overdue';
                statusText = 'Vencida';
                saveDebts();
            }
            
            row.innerHTML = `
                <td>${debt.debtorName}</td>
                <td>$${debt.debtAmount.toFixed(2)}</td>
                <td>${debt.debtDescription || '-'}</td>
                <td>${formatDate(debt.debtDate)}</td>
                <td>${debt.debtDueDate ? formatDate(debt.debtDueDate) : '-'}</td>
                <td class="${statusClass}">${statusText}</td>
                <td>
                    ${debt.status !== 'paid' ? `<button class="action-btn pay-btn" data-id="${debt.id}">Pagar</button>` : ''}
                    <button class="action-btn delete-btn" data-id="${debt.id}">Eliminar</button>
                </td>
            `;
            
            debtsTable.appendChild(row);
        });
        
        // Agregar event listeners a los botones
        document.querySelectorAll('.pay-btn').forEach(btn => {
            btn.addEventListener('click', markAsPaid);
        });
        
        document.querySelectorAll('.delete-btn').forEach(btn => {
            btn.addEventListener('click', deleteDebt);
        });
    }
    
    // Función para marcar una deuda como pagada
    function markAsPaid(event) {
        const debtId = parseInt(event.target.getAttribute('data-id'));
        const debtIndex = debts.findIndex(debt => debt.id === debtId);
        
        if (debtIndex !== -1) {
            debts[debtIndex].status = 'paid';
            debts[debtIndex].paidDate = new Date().toISOString().split('T')[0];
            saveDebts();
            renderDebts();
        }
    }
    
    // Función para eliminar una deuda
    function deleteDebt(event) {
        if (confirm('¿Estás seguro de que quieres eliminar esta deuda?')) {
            const debtId = parseInt(event.target.getAttribute('data-id'));
            debts = debts.filter(debt => debt.id !== debtId);
            saveDebts();
            renderDebts();
        }
    }
    
    // Función para filtrar deudas
    function filterDebts() {
        const searchTerm = searchInput.value.toLowerCase();
        const statusFilter = filterStatus.value;
        
        let filtered = debts.filter(debt => {
            const matchesSearch = debt.debtorName.toLowerCase().includes(searchTerm);
            let matchesStatus = true;
            
            if (statusFilter === 'pending') {
                matchesStatus = debt.status === 'pending' && 
                    (!debt.debtDueDate || new Date(debt.debtDueDate) >= new Date());
            } else if (statusFilter === 'paid') {
                matchesStatus = debt.status === 'paid';
            } else if (statusFilter === 'overdue') {
                matchesStatus = debt.status === 'overdue' || 
                    (debt.debtDueDate && new Date(debt.debtDueDate) < new Date() && debt.status !== 'paid');
            }
            
            return matchesSearch && matchesStatus;
        });
        
        renderDebts(filtered);
    }
    
    // Función para actualizar el resumen
    function updateSummary() {
        const totalPending = debts
            .filter(debt => debt.status === 'pending' && 
                   (!debt.debtDueDate || new Date(debt.debtDueDate) >= new Date()))
            .reduce((sum, debt) => sum + debt.debtAmount, 0);
            
        const totalOverdue = debts
            .filter(debt => debt.status === 'overdue' || 
                   (debt.debtDueDate && new Date(debt.debtDueDate) < new Date() && debt.status !== 'paid'))
            .reduce((sum, debt) => sum + debt.debtAmount, 0);
            
        const totalPaid = debts
            .filter(debt => debt.status === 'paid')
            .reduce((sum, debt) => sum + debt.debtAmount, 0);
            
        document.getElementById('total-pending').textContent = `$${totalPending.toFixed(2)}`;
        document.getElementById('total-overdue').textContent = `$${totalOverdue.toFixed(2)}`;
        document.getElementById('total-paid').textContent = `$${totalPaid.toFixed(2)}`;
    }
    
    // Función auxiliar para formatear fechas
    function formatDate(dateString) {
        if (!dateString) return '-';
        const options = { year: 'numeric', month: 'short', day: 'numeric' };
        return new Date(dateString).toLocaleDateString('es-ES', options);
    }
    
    // Event listeners
    debtForm.addEventListener('submit', addDebt);
    searchInput.addEventListener('input', filterDebts);
    filterStatus.addEventListener('change', filterDebts);
    
    // Inicializar la aplicación
    renderDebts();
    updateSummary();
});  
    </script>
</body>
</html>